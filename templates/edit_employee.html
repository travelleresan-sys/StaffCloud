{% extends "base.html" %}

{% block title %}スタッフ情報編集 - StaffCloud{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
        <div class="card shadow">
            <div class="card-header">
                <h3 class="card-title mb-0">
                    <i class="bi bi-pencil-square me-2"></i>従業員情報編集
                </h3>
            </div>
            <div class="card-body p-4">
                <form method="POST" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="name" class="form-label">氏名</label>
                            <input type="text" class="form-control" id="name" name="name" value="{{ employee.name }}" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="birth_date" class="form-label">生年月日</label>
                            <input type="date" class="form-control" id="birth_date" name="birth_date" 
                                   value="{{ employee.birth_date.strftime('%Y-%m-%d') if employee.birth_date else '' }}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="gender" class="form-label">性別</label>
                            <select class="form-select" id="gender" name="gender">
                                <option value="">選択してください</option>
                                <option value="男性" {% if employee.gender == '男性' %}selected{% endif %}>男性</option>
                                <option value="女性" {% if employee.gender == '女性' %}selected{% endif %}>女性</option>
                                <option value="その他" {% if employee.gender == 'その他' %}selected{% endif %}>その他</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="join_date" class="form-label">入社年月日</label>
                            <input type="date" class="form-control" id="join_date" name="join_date" value="{{ employee.join_date.strftime('%Y-%m-%d') }}" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="phone_number" class="form-label">電話番号</label>
                            <input type="tel" class="form-control" id="phone_number" name="phone_number" 
                                   value="{{ employee.phone_number or '' }}" placeholder="例: 090-1234-5678">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="status" class="form-label">在籍状況</label>
                            <select class="form-select" id="status" name="status" required>
                                <option value="在籍中" {% if employee.status == '在籍中' %}selected{% endif %}>在籍中</option>
                                <option value="退職済" {% if employee.status == '退職済' %}selected{% endif %}>退職済</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="nationality" class="form-label">国籍</label>
                            <select class="form-select" id="nationality" name="nationality">
                                <option value="" {% if not employee.nationality %}selected{% endif %}>選択してください</option>
                                <optgroup label="アジア・オセアニア">
                                    <option value="日本" {% if employee.nationality == '日本' %}selected{% endif %}>日本</option>
                                    <option value="中国" {% if employee.nationality == '中国' %}selected{% endif %}>中国</option>
                                    <option value="韓国" {% if employee.nationality == '韓国' %}selected{% endif %}>韓国</option>
                                    <option value="モンゴル" {% if employee.nationality == 'モンゴル' %}selected{% endif %}>モンゴル</option>
                                    <option value="ベトナム" {% if employee.nationality == 'ベトナム' %}selected{% endif %}>ベトナム</option>
                                    <option value="ネパール" {% if employee.nationality == 'ネパール' %}selected{% endif %}>ネパール</option>
                                    <option value="フィリピン" {% if employee.nationality == 'フィリピン' %}selected{% endif %}>フィリピン</option>
                                    <option value="インド" {% if employee.nationality == 'インド' %}selected{% endif %}>インド</option>
                                    <option value="インドネシア" {% if employee.nationality == 'インドネシア' %}selected{% endif %}>インドネシア</option>
                                    <option value="ミャンマー" {% if employee.nationality == 'ミャンマー' %}selected{% endif %}>ミャンマー</option>
                                    <option value="カンボジア" {% if employee.nationality == 'カンボジア' %}selected{% endif %}>カンボジア</option>
                                    <option value="ラオス" {% if employee.nationality == 'ラオス' %}selected{% endif %}>ラオス</option>
                                    <option value="タイ" {% if employee.nationality == 'タイ' %}selected{% endif %}>タイ</option>
                                    <option value="マレーシア" {% if employee.nationality == 'マレーシア' %}selected{% endif %}>マレーシア</option>
                                    <option value="シンガポール" {% if employee.nationality == 'シンガポール' %}selected{% endif %}>シンガポール</option>
                                    <option value="バングラデシュ" {% if employee.nationality == 'バングラデシュ' %}selected{% endif %}>バングラデシュ</option>
                                    <option value="スリランカ" {% if employee.nationality == 'スリランカ' %}selected{% endif %}>スリランカ</option>
                                    <option value="パキスタン" {% if employee.nationality == 'パキスタン' %}selected{% endif %}>パキスタン</option>
                                    <option value="ウズベキスタン" {% if employee.nationality == 'ウズベキスタン' %}selected{% endif %}>ウズベキスタン</option>
                                    <option value="カザフスタン" {% if employee.nationality == 'カザフスタン' %}selected{% endif %}>カザフスタン</option>
                                    <option value="キルギス" {% if employee.nationality == 'キルギス' %}selected{% endif %}>キルギス</option>
                                    <option value="タジキスタン" {% if employee.nationality == 'タジキスタン' %}selected{% endif %}>タジキスタン</option>
                                    <option value="トルクメニスタン" {% if employee.nationality == 'トルクメニスタン' %}selected{% endif %}>トルクメニスタン</option>
                                    <option value="アフガニスタン" {% if employee.nationality == 'アフガニスタン' %}selected{% endif %}>アフガニスタン</option>
                                    <option value="オーストラリア" {% if employee.nationality == 'オーストラリア' %}selected{% endif %}>オーストラリア</option>
                                    <option value="ニュージーランド" {% if employee.nationality == 'ニュージーランド' %}selected{% endif %}>ニュージーランド</option>
                                </optgroup>
                                <optgroup label="中東・アフリカ">
                                    <option value="イラン" {% if employee.nationality == 'イラン' %}selected{% endif %}>イラン</option>
                                    <option value="イラク" {% if employee.nationality == 'イラク' %}selected{% endif %}>イラク</option>
                                    <option value="サウジアラビア" {% if employee.nationality == 'サウジアラビア' %}selected{% endif %}>サウジアラビア</option>
                                    <option value="UAE" {% if employee.nationality == 'UAE' %}selected{% endif %}>UAE</option>
                                    <option value="クウェート" {% if employee.nationality == 'クウェート' %}selected{% endif %}>クウェート</option>
                                    <option value="カタール" {% if employee.nationality == 'カタール' %}selected{% endif %}>カタール</option>
                                    <option value="オマーン" {% if employee.nationality == 'オマーン' %}selected{% endif %}>オマーン</option>
                                    <option value="バーレーン" {% if employee.nationality == 'バーレーン' %}selected{% endif %}>バーレーン</option>
                                    <option value="ヨルダン" {% if employee.nationality == 'ヨルダン' %}selected{% endif %}>ヨルダン</option>
                                    <option value="レバノン" {% if employee.nationality == 'レバノン' %}selected{% endif %}>レバノン</option>
                                    <option value="シリア" {% if employee.nationality == 'シリア' %}selected{% endif %}>シリア</option>
                                    <option value="イスラエル" {% if employee.nationality == 'イスラエル' %}selected{% endif %}>イスラエル</option>
                                    <option value="トルコ" {% if employee.nationality == 'トルコ' %}selected{% endif %}>トルコ</option>
                                    <option value="エジプト" {% if employee.nationality == 'エジプト' %}selected{% endif %}>エジプト</option>
                                    <option value="モロッコ" {% if employee.nationality == 'モロッコ' %}selected{% endif %}>モロッコ</option>
                                    <option value="チュニジア" {% if employee.nationality == 'チュニジア' %}selected{% endif %}>チュニジア</option>
                                    <option value="アルジェリア" {% if employee.nationality == 'アルジェリア' %}selected{% endif %}>アルジェリア</option>
                                    <option value="リビア" {% if employee.nationality == 'リビア' %}selected{% endif %}>リビア</option>
                                    <option value="スーダン" {% if employee.nationality == 'スーダン' %}selected{% endif %}>スーダン</option>
                                    <option value="エチオピア" {% if employee.nationality == 'エチオピア' %}selected{% endif %}>エチオピア</option>
                                    <option value="ケニア" {% if employee.nationality == 'ケニア' %}selected{% endif %}>ケニア</option>
                                    <option value="ナイジェリア" {% if employee.nationality == 'ナイジェリア' %}selected{% endif %}>ナイジェリア</option>
                                    <option value="ガーナ" {% if employee.nationality == 'ガーナ' %}selected{% endif %}>ガーナ</option>
                                    <option value="セネガル" {% if employee.nationality == 'セネガル' %}selected{% endif %}>セネガル</option>
                                    <option value="コートジボワール" {% if employee.nationality == 'コートジボワール' %}selected{% endif %}>コートジボワール</option>
                                    <option value="カメルーン" {% if employee.nationality == 'カメルーン' %}selected{% endif %}>カメルーン</option>
                                    <option value="コンゴ民主共和国" {% if employee.nationality == 'コンゴ民主共和国' %}selected{% endif %}>コンゴ民主共和国</option>
                                    <option value="南アフリカ" {% if employee.nationality == '南アフリカ' %}selected{% endif %}>南アフリカ</option>
                                </optgroup>
                                <optgroup label="北米・中南米">
                                    <option value="米国" {% if employee.nationality == '米国' %}selected{% endif %}>米国</option>
                                    <option value="カナダ" {% if employee.nationality == 'カナダ' %}selected{% endif %}>カナダ</option>
                                    <option value="メキシコ" {% if employee.nationality == 'メキシコ' %}selected{% endif %}>メキシコ</option>
                                    <option value="ブラジル" {% if employee.nationality == 'ブラジル' %}selected{% endif %}>ブラジル</option>
                                    <option value="アルゼンチン" {% if employee.nationality == 'アルゼンチン' %}selected{% endif %}>アルゼンチン</option>
                                    <option value="チリ" {% if employee.nationality == 'チリ' %}selected{% endif %}>チリ</option>
                                    <option value="ペルー" {% if employee.nationality == 'ペルー' %}selected{% endif %}>ペルー</option>
                                    <option value="コロンビア" {% if employee.nationality == 'コロンビア' %}selected{% endif %}>コロンビア</option>
                                    <option value="ベネズエラ" {% if employee.nationality == 'ベネズエラ' %}selected{% endif %}>ベネズエラ</option>
                                    <option value="エクアドル" {% if employee.nationality == 'エクアドル' %}selected{% endif %}>エクアドル</option>
                                    <option value="ボリビア" {% if employee.nationality == 'ボリビア' %}selected{% endif %}>ボリビア</option>
                                    <option value="パラグアイ" {% if employee.nationality == 'パラグアイ' %}selected{% endif %}>パラグアイ</option>
                                    <option value="ウルグアイ" {% if employee.nationality == 'ウルグアイ' %}selected{% endif %}>ウルグアイ</option>
                                </optgroup>
                                <optgroup label="ヨーロッパ">
                                    <option value="イギリス" {% if employee.nationality == 'イギリス' %}selected{% endif %}>イギリス</option>
                                    <option value="フランス" {% if employee.nationality == 'フランス' %}selected{% endif %}>フランス</option>
                                    <option value="ドイツ" {% if employee.nationality == 'ドイツ' %}selected{% endif %}>ドイツ</option>
                                    <option value="イタリア" {% if employee.nationality == 'イタリア' %}selected{% endif %}>イタリア</option>
                                    <option value="スペイン" {% if employee.nationality == 'スペイン' %}selected{% endif %}>スペイン</option>
                                    <option value="ポルトガル" {% if employee.nationality == 'ポルトガル' %}selected{% endif %}>ポルトガル</option>
                                    <option value="オランダ" {% if employee.nationality == 'オランダ' %}selected{% endif %}>オランダ</option>
                                    <option value="ベルギー" {% if employee.nationality == 'ベルギー' %}selected{% endif %}>ベルギー</option>
                                    <option value="スイス" {% if employee.nationality == 'スイス' %}selected{% endif %}>スイス</option>
                                    <option value="オーストリア" {% if employee.nationality == 'オーストリア' %}selected{% endif %}>オーストリア</option>
                                    <option value="スウェーデン" {% if employee.nationality == 'スウェーデン' %}selected{% endif %}>スウェーデン</option>
                                    <option value="ノルウェー" {% if employee.nationality == 'ノルウェー' %}selected{% endif %}>ノルウェー</option>
                                    <option value="デンマーク" {% if employee.nationality == 'デンマーク' %}selected{% endif %}>デンマーク</option>
                                    <option value="フィンランド" {% if employee.nationality == 'フィンランド' %}selected{% endif %}>フィンランド</option>
                                    <option value="ポーランド" {% if employee.nationality == 'ポーランド' %}selected{% endif %}>ポーランド</option>
                                    <option value="チェコ" {% if employee.nationality == 'チェコ' %}selected{% endif %}>チェコ</option>
                                    <option value="スロバキア" {% if employee.nationality == 'スロバキア' %}selected{% endif %}>スロバキア</option>
                                    <option value="ハンガリー" {% if employee.nationality == 'ハンガリー' %}selected{% endif %}>ハンガリー</option>
                                    <option value="ルーマニア" {% if employee.nationality == 'ルーマニア' %}selected{% endif %}>ルーマニア</option>
                                    <option value="ブルガリア" {% if employee.nationality == 'ブルガリア' %}selected{% endif %}>ブルガリア</option>
                                    <option value="クロアチア" {% if employee.nationality == 'クロアチア' %}selected{% endif %}>クロアチア</option>
                                    <option value="スロベニア" {% if employee.nationality == 'スロベニア' %}selected{% endif %}>スロベニア</option>
                                    <option value="セルビア" {% if employee.nationality == 'セルビア' %}selected{% endif %}>セルビア</option>
                                    <option value="ボスニア・ヘルツェゴビナ" {% if employee.nationality == 'ボスニア・ヘルツェゴビナ' %}selected{% endif %}>ボスニア・ヘルツェゴビナ</option>
                                    <option value="モンテネグロ" {% if employee.nationality == 'モンテネグロ' %}selected{% endif %}>モンテネグロ</option>
                                    <option value="北マケドニア" {% if employee.nationality == '北マケドニア' %}selected{% endif %}>北マケドニア</option>
                                    <option value="アルバニア" {% if employee.nationality == 'アルバニア' %}selected{% endif %}>アルバニア</option>
                                    <option value="ギリシャ" {% if employee.nationality == 'ギリシャ' %}selected{% endif %}>ギリシャ</option>
                                    <option value="ウクライナ" {% if employee.nationality == 'ウクライナ' %}selected{% endif %}>ウクライナ</option>
                                    <option value="ベラルーシ" {% if employee.nationality == 'ベラルーシ' %}selected{% endif %}>ベラルーシ</option>
                                    <option value="リトアニア" {% if employee.nationality == 'リトアニア' %}selected{% endif %}>リトアニア</option>
                                    <option value="ラトビア" {% if employee.nationality == 'ラトビア' %}selected{% endif %}>ラトビア</option>
                                    <option value="エストニア" {% if employee.nationality == 'エストニア' %}selected{% endif %}>エストニア</option>
                                    <option value="ロシア" {% if employee.nationality == 'ロシア' %}selected{% endif %}>ロシア</option>
                                    <option value="ジョージア" {% if employee.nationality == 'ジョージア' %}selected{% endif %}>ジョージア</option>
                                    <option value="アルメニア" {% if employee.nationality == 'アルメニア' %}selected{% endif %}>アルメニア</option>
                                    <option value="アゼルバイジャン" {% if employee.nationality == 'アゼルバイジャン' %}selected{% endif %}>アゼルバイジャン</option>
                                </optgroup>
                                <option value="その他" {% if employee.nationality == 'その他' %}selected{% endif %}>その他</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="residence_card_expiry" class="form-label">在留カード期限</label>
                            <input type="date" class="form-control" id="residence_card_expiry" name="residence_card_expiry" 
                                   value="{{ employee.residence_card_expiry.strftime('%Y-%m-%d') if employee.residence_card_expiry else '' }}">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="car_insurance_expiry" class="form-label">自動車保険満了日</label>
                            <input type="date" class="form-control" id="car_insurance_expiry" name="car_insurance_expiry" 
                                   value="{{ employee.car_insurance_expiry.strftime('%Y-%m-%d') if employee.car_insurance_expiry else '' }}">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="photo" class="form-label">顔写真</label>
                            {% if employee.photo_filename %}
                                <div class="mb-2">
                                    <img src="{{ url_for('static', filename='uploads/' + employee.photo_filename) }}" 
                                         alt="現在の写真" 
                                         class="img-thumbnail" 
                                         style="width: 100px; height: 100px; object-fit: cover;">
                                    <p class="form-text">現在の写真</p>
                                </div>
                            {% endif %}
                            <div class="input-group">
                                <input type="file" class="form-control" id="photo" name="photo" accept="image/*" onchange="previewImage(this, 'photo-preview')">
                                <button type="button" class="btn btn-outline-secondary" onclick="clearPhotoPreview('photo', 'photo-preview')">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                            </div>
                            <div class="form-text">新しい写真を選択すると、現在の写真が置き換えられます</div>
                            <!-- サムネイル表示エリア -->
                            <div id="photo-preview" class="mt-2" style="display: none;">
                                <img id="photo-preview-img" src="" alt="プレビュー" 
                                     class="img-thumbnail" 
                                     style="width: 100px; height: 100px; object-fit: cover;">
                                <p class="form-text mt-1">アップロード予定の画像</p>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="residence_card_file" class="form-label">在留カード画像・PDF</label>
                            {% if employee.residence_card_filename %}
                                <div class="mb-2">
                                    {% if employee.residence_card_filename.endswith('.pdf') %}
                                        <div class="alert alert-info py-2">
                                            <i class="bi bi-file-earmark-pdf me-2"></i>
                                            {{ employee.residence_card_filename }}
                                        </div>
                                    {% else %}
                                        <img src="{{ url_for('static', filename='uploads/' + employee.residence_card_filename) }}" 
                                             alt="現在の在留カード" 
                                             class="img-thumbnail" 
                                             style="width: 100px; height: 100px; object-fit: cover;">
                                    {% endif %}
                                    <p class="form-text">現在の在留カードファイル</p>
                                </div>
                            {% endif %}
                            <div class="input-group">
                                <input type="file" class="form-control" id="residence_card_file" name="residence_card_file" accept="image/*,.pdf" onchange="previewResidenceCard(this)">
                                <button type="button" class="btn btn-outline-secondary" onclick="clearResidenceCardPreview()">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                            </div>
                            <div class="form-text">新しいファイルを選択すると、現在のファイルが置き換えられます</div>
                            <!-- ファイル名表示エリア -->
                            <div id="residence-card-preview" class="mt-2" style="display: none;">
                                <div class="alert alert-info py-2">
                                    <i class="bi bi-file-earmark me-2"></i>
                                    <span id="residence-card-filename"></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="car_insurance_file" class="form-label">自動車保険証画像・PDF</label>
                            {% if employee.car_insurance_filename %}
                                <div class="mb-2">
                                    {% if employee.car_insurance_filename.endswith('.pdf') %}
                                        <div class="alert alert-info py-2">
                                            <i class="bi bi-file-earmark-pdf me-2"></i>
                                            {{ employee.car_insurance_filename }}
                                        </div>
                                    {% else %}
                                        <img src="{{ url_for('static', filename='uploads/' + employee.car_insurance_filename) }}" 
                                             alt="現在の自動車保険証" 
                                             class="img-thumbnail" 
                                             style="max-width: 200px; max-height: 150px;">
                                        <p class="form-text">現在の自動車保険証</p>
                                    {% endif %}
                                </div>
                            {% endif %}
                            <div class="input-group">
                                <input type="file" class="form-control" id="car_insurance_file" name="car_insurance_file" accept="image/*,.pdf" onchange="previewCarInsurance(this)">
                                <button type="button" class="btn btn-outline-secondary" onclick="clearCarInsurancePreview()">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                            </div>
                            <div class="form-text">新しいファイルを選択すると、現在の自動車保険証が置き換えられます</div>
                            <!-- ファイル名表示エリア -->
                            <div id="car-insurance-preview" class="mt-2" style="display: none;">
                                <div class="alert alert-info py-2">
                                    <i class="bi bi-file-earmark me-2"></i>
                                    <span id="car-insurance-filename"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- HR情報 (管理者専用) -->
                    <div class="row">
                        <div class="col-12 mb-3">
                            <h6 class="border-bottom pb-2 mb-3">
                                <i class="bi bi-briefcase me-2"></i>人事情報
                                <small class="text-muted">(管理者のみ表示)</small>
                            </h6>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="position" class="form-label">役職</label>
                            <input type="text" class="form-control" id="position" name="position" 
                                   value="{{ employee.position or '' }}" placeholder="例: 主任、課長">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="department" class="form-label">部署</label>
                            <select class="form-select" id="department" name="department">
                                <option value="" {% if not employee.department %}selected{% endif %}>選択してください</option>
                                <option value="営業部" {% if employee.department == '営業部' %}selected{% endif %}>営業部</option>
                                <option value="マーケティング部" {% if employee.department == 'マーケティング部' %}selected{% endif %}>マーケティング部</option>
                                <option value="開発部" {% if employee.department == '開発部' %}selected{% endif %}>開発部</option>
                                <option value="技術部" {% if employee.department == '技術部' %}selected{% endif %}>技術部</option>
                                <option value="製造部" {% if employee.department == '製造部' %}selected{% endif %}>製造部</option>
                                <option value="品質保証部" {% if employee.department == '品質保証部' %}selected{% endif %}>品質保証部</option>
                                <option value="人事部" {% if employee.department == '人事部' %}selected{% endif %}>人事部</option>
                                <option value="総務部" {% if employee.department == '総務部' %}selected{% endif %}>総務部</option>
                                <option value="経理部" {% if employee.department == '経理部' %}selected{% endif %}>経理部</option>
                                <option value="法務部" {% if employee.department == '法務部' %}selected{% endif %}>法務部</option>
                                <option value="情報システム部" {% if employee.department == '情報システム部' %}selected{% endif %}>情報システム部</option>
                                <option value="カスタマーサポート部" {% if employee.department == 'カスタマーサポート部' %}selected{% endif %}>カスタマーサポート部</option>
                                <option value="購買部" {% if employee.department == '購買部' %}selected{% endif %}>購買部</option>
                                <option value="物流部" {% if employee.department == '物流部' %}selected{% endif %}>物流部</option>
                                <option value="企画部" {% if employee.department == '企画部' %}selected{% endif %}>企画部</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="hire_type" class="form-label">雇用形態</label>
                            <select class="form-select" id="hire_type" name="hire_type">
                                <option value="" {% if not employee.hire_type %}selected{% endif %}>選択してください</option>
                                <option value="正社員" {% if employee.hire_type == '正社員' %}selected{% endif %}>正社員</option>
                                <option value="契約社員" {% if employee.hire_type == '契約社員' %}selected{% endif %}>契約社員</option>
                                <option value="派遣社員" {% if employee.hire_type == '派遣社員' %}selected{% endif %}>派遣社員</option>
                                <option value="パート・アルバイト" {% if employee.hire_type == 'パート・アルバイト' %}selected{% endif %}>パート・アルバイト</option>
                                <option value="業務委託" {% if employee.hire_type == '業務委託' %}selected{% endif %}>業務委託</option>
                                <option value="インターン" {% if employee.hire_type == 'インターン' %}selected{% endif %}>インターン</option>
                                <option value="その他" {% if employee.hire_type == 'その他' %}selected{% endif %}>その他</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="work_history" class="form-label">経歴</label>
                            <textarea class="form-control" id="work_history" name="work_history" rows="3" 
                                      placeholder="職歴や経験について記載">{{ employee.work_history or '' }}</textarea>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="skills" class="form-label">スキル</label>
                            <textarea class="form-control" id="skills" name="skills" rows="3" 
                                      placeholder="技術スキル、言語能力など">{{ employee.skills or '' }}</textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="qualifications" class="form-label">資格</label>
                            <textarea class="form-control" id="qualifications" name="qualifications" rows="3" 
                                      placeholder="保有資格、免許など">{{ employee.qualifications or '' }}</textarea>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="salary_grade" class="form-label">給与等級</label>
                            <select class="form-select" id="salary_grade" name="salary_grade">
                                <option value="" {% if not employee.salary_grade %}selected{% endif %}>選択してください</option>
                                <option value="S1" {% if employee.salary_grade == 'S1' %}selected{% endif %}>S1</option>
                                <option value="S2" {% if employee.salary_grade == 'S2' %}selected{% endif %}>S2</option>
                                <option value="S3" {% if employee.salary_grade == 'S3' %}selected{% endif %}>S3</option>
                                <option value="A1" {% if employee.salary_grade == 'A1' %}selected{% endif %}>A1</option>
                                <option value="A2" {% if employee.salary_grade == 'A2' %}selected{% endif %}>A2</option>
                                <option value="A3" {% if employee.salary_grade == 'A3' %}selected{% endif %}>A3</option>
                                <option value="B1" {% if employee.salary_grade == 'B1' %}selected{% endif %}>B1</option>
                                <option value="B2" {% if employee.salary_grade == 'B2' %}selected{% endif %}>B2</option>
                                <option value="B3" {% if employee.salary_grade == 'B3' %}selected{% endif %}>B3</option>
                                <option value="C1" {% if employee.salary_grade == 'C1' %}selected{% endif %}>C1</option>
                                <option value="C2" {% if employee.salary_grade == 'C2' %}selected{% endif %}>C2</option>
                                <option value="C3" {% if employee.salary_grade == 'C3' %}selected{% endif %}>C3</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 mb-4">
                            <label for="address" class="form-label">住所</label>
                            <textarea class="form-control" id="address" name="address" rows="3" placeholder="例: 東京都渋谷区...">{{ employee.address or '' }}</textarea>
                        </div>
                    </div>
                    <div class="d-flex gap-2 justify-content-end">
                        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
                            <i class="bi bi-arrow-left me-1"></i>キャンセル
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle me-1"></i>更新
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function previewImage(input, previewId) {
        const preview = document.getElementById(previewId);
        const img = document.getElementById(previewId + '-img');
        
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                img.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(input.files[0]);
        } else {
            preview.style.display = 'none';
        }
    }
    
    function clearPhotoPreview(inputId, previewId) {
        const input = document.getElementById(inputId);
        const preview = document.getElementById(previewId);
        
        input.value = '';
        preview.style.display = 'none';
    }
    
    function previewResidenceCard(input) {
        const preview = document.getElementById('residence-card-preview');
        const filename = document.getElementById('residence-card-filename');
        
        if (input.files && input.files[0]) {
            preview.style.display = 'block';
            filename.textContent = input.files[0].name;
        } else {
            preview.style.display = 'none';
        }
    }
    
    function clearResidenceCardPreview() {
        const input = document.getElementById('residence_card_file');
        const preview = document.getElementById('residence-card-preview');
        
        input.value = '';
        preview.style.display = 'none';
    }
    
    function previewCarInsurance(input) {
        const preview = document.getElementById('car-insurance-preview');
        const filename = document.getElementById('car-insurance-filename');
        
        if (input.files && input.files[0]) {
            preview.style.display = 'block';
            filename.textContent = input.files[0].name;
        } else {
            preview.style.display = 'none';
        }
    }
    
    function clearCarInsurancePreview() {
        const input = document.getElementById('car_insurance_file');
        const preview = document.getElementById('car-insurance-preview');
        
        input.value = '';
        preview.style.display = 'none';
    }
</script>

{% endblock %}
